{"ast":null,"code":"import _classCallCheck from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _get from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/get\";import _inherits from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import PropTypes from\"prop-types\";import $ from\"jquery\";import Emulator from\"../Emulator/index\";import EmulatorView from\"../Emulator/EmulatorView\";import{getSelectionRange,getStartSelection}from\"../Emulator/controler\";var MARK_1=\"mark-1\";var MARK_3=\"mark-3\";export var ListMapping=/*#__PURE__*/function(_Emulator){_inherits(ListMapping,_Emulator);function ListMapping(){var _getPrototypeOf2;var _this;_classCallCheck(this,ListMapping);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ListMapping)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.onMouseUp=function(callbackFn){var id=_this.state.id;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.mouseup(function(event){// console.log(`| ========== ${event.type} ========== | `);\ncallbackFn(event);_this.clearAllMarkChackString(id);});};_this.onDoubleClick=function(callbackFn){var id=_this.state.id;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.dblclick(function(event){// console.log(`| ========== ${event.type} ========== |`);\ncallbackFn(event);});};_this.onSelect=function(){var _this$state=_this.state,id=_this$state.id,colSize=_this$state.colSize;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.select(function(event){// console.log(`| ========== ${event.type} ========== |`);\nvar start=event.target.selectionStart;var end=event.target.selectionEnd;var startPosition=getStartSelection(id,colSize);var data={text:getSelectionRange(id,start,end),row:startPosition.row,col:startPosition.col};_this.setState({lastSelection:{text:getSelectionRange(id,start,end),row:startPosition.row,col:startPosition.col}});if(data.text.length<colSize){_this.markStringChackString(MARK_3,data);}else if(data.col===1&&data.text.length>=colSize){_this.markStringChackString(MARK_1,data);}});};_this.getListHighlight=function(){var markType=MARK_1;return _this.state.markList[markType.replace(\"-\",\"\")];};_this.setListHighlight=function(highlight){_this.markStringChackString(MARK_1,highlight);};_this.clearListHighlight=function(){return _this.clearMarkString(MARK_1);};_this.getFieldHighlight=function(){return _this.state.markList[MARK_3.replace(\"-\",\"\")];};_this.setFieldHighlight=function(highlight){_this.markStringChackString(MARK_3,highlight);};_this.clearFieldHighlight=function(){return _this.clearMarkString(MARK_3);};_this.getLastSelection=function(){return _this.state.lastSelection;};return _this;}_createClass(ListMapping,[{key:\"componentDidMount\",value:function componentDidMount(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_get(_getPrototypeOf(ListMapping.prototype),\"componentDidMount\",this).apply(this,args);this.markAllCheckString(this.props.highlight);var _this$props=this.props,onDoubleClick=_this$props.onDoubleClick,onMouseUp=_this$props.onMouseUp;this.onSelect();this.onMouseUp(onMouseUp);this.onDoubleClick(onDoubleClick);}},{key:\"render\",value:function render(){var id=this.props.id;return React.createElement(EmulatorView,{id:id,readOnly:true});}// Set default props\n}]);return ListMapping;}(Emulator);ListMapping.defaultProps={highlight:{}};ListMapping.propTypes={highlightList:PropTypes.object,onDoubleClick:PropTypes.func,onMouseUp:PropTypes.func};export default ListMapping;","map":{"version":3,"sources":["/Users/jutawuth/Git/SSQUARE/Component-AS400-React/src/components/ListMapping/index.jsx"],"names":["React","PropTypes","$","Emulator","EmulatorView","getSelectionRange","getStartSelection","MARK_1","MARK_3","ListMapping","onMouseUp","callbackFn","id","state","elScreen","mouseup","event","clearAllMarkChackString","onDoubleClick","dblclick","onSelect","colSize","select","start","target","selectionStart","end","selectionEnd","startPosition","data","text","row","col","setState","lastSelection","length","markStringChackString","getListHighlight","markType","markList","replace","setListHighlight","highlight","clearListHighlight","clearMarkString","getFieldHighlight","setFieldHighlight","clearFieldHighlight","getLastSelection","args","apply","markAllCheckString","props","defaultProps","propTypes","highlightList","object","func"],"mappings":"kxBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CAEA,MAAOC,CAAAA,QAAP,KAAqB,mBAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,0BAAzB,CAEA,OAASC,iBAAT,CAA4BC,iBAA5B,KAAqD,uBAArD,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAAf,CACA,GAAMC,CAAAA,MAAM,CAAG,QAAf,CAEA,UAAaC,CAAAA,WAAb,iZAaEC,SAbF,CAac,SAAAC,UAAU,CAAI,IAChBC,CAAAA,EADgB,CACT,MAAKC,KADI,CAChBD,EADgB,CAExB,GAAME,CAAAA,QAAQ,CAAGZ,CAAC,YAAKU,EAAL,kBAAlB,CAEAE,QAAQ,CAACC,OAAT,CAAiB,SAAAC,KAAK,CAAI,CACxB;AACAL,UAAU,CAACK,KAAD,CAAV,CACA,MAAKC,uBAAL,CAA6BL,EAA7B,EACD,CAJD,EAKD,CAtBH,OAwBEM,aAxBF,CAwBkB,SAAAP,UAAU,CAAI,IACpBC,CAAAA,EADoB,CACb,MAAKC,KADQ,CACpBD,EADoB,CAE5B,GAAME,CAAAA,QAAQ,CAAGZ,CAAC,YAAKU,EAAL,kBAAlB,CAEAE,QAAQ,CAACK,QAAT,CAAkB,SAAAH,KAAK,CAAI,CACzB;AAEAL,UAAU,CAACK,KAAD,CAAV,CACD,CAJD,EAKD,CAjCH,OAmCEI,QAnCF,CAmCa,UAAM,iBACS,MAAKP,KADd,CACPD,EADO,aACPA,EADO,CACHS,OADG,aACHA,OADG,CAEf,GAAMP,CAAAA,QAAQ,CAAGZ,CAAC,YAAKU,EAAL,kBAAlB,CAEAE,QAAQ,CAACQ,MAAT,CAAgB,SAAAN,KAAK,CAAI,CACvB;AACA,GAAMO,CAAAA,KAAK,CAAGP,KAAK,CAACQ,MAAN,CAAaC,cAA3B,CACA,GAAMC,CAAAA,GAAG,CAAGV,KAAK,CAACQ,MAAN,CAAaG,YAAzB,CACA,GAAMC,CAAAA,aAAa,CAAGtB,iBAAiB,CAACM,EAAD,CAAKS,OAAL,CAAvC,CAEA,GAAMQ,CAAAA,IAAI,CAAG,CACXC,IAAI,CAAEzB,iBAAiB,CAACO,EAAD,CAAKW,KAAL,CAAYG,GAAZ,CADZ,CAEXK,GAAG,CAAEH,aAAa,CAACG,GAFR,CAGXC,GAAG,CAAEJ,aAAa,CAACI,GAHR,CAAb,CAMA,MAAKC,QAAL,CAAc,CACZC,aAAa,CAAE,CACbJ,IAAI,CAAEzB,iBAAiB,CAACO,EAAD,CAAKW,KAAL,CAAYG,GAAZ,CADV,CAEbK,GAAG,CAAEH,aAAa,CAACG,GAFN,CAGbC,GAAG,CAAEJ,aAAa,CAACI,GAHN,CADH,CAAd,EAQA,GAAIH,IAAI,CAACC,IAAL,CAAUK,MAAV,CAAmBd,OAAvB,CAAgC,CAC9B,MAAKe,qBAAL,CAA2B5B,MAA3B,CAAmCqB,IAAnC,EACD,CAFD,IAEO,IAAIA,IAAI,CAACG,GAAL,GAAa,CAAb,EAAkBH,IAAI,CAACC,IAAL,CAAUK,MAAV,EAAoBd,OAA1C,CAAmD,CACxD,MAAKe,qBAAL,CAA2B7B,MAA3B,CAAmCsB,IAAnC,EACD,CACF,CAzBD,EA0BD,CAjEH,OAwEEQ,gBAxEF,CAwEqB,UAAM,CACvB,GAAMC,CAAAA,QAAQ,CAAG/B,MAAjB,CACA,MAAO,OAAKM,KAAL,CAAW0B,QAAX,CAAoBD,QAAQ,CAACE,OAAT,CAAiB,GAAjB,CAAsB,EAAtB,CAApB,CAAP,CACD,CA3EH,OA6EEC,gBA7EF,CA6EqB,SAAAC,SAAS,CAAI,CAC9B,MAAKN,qBAAL,CAA2B7B,MAA3B,CAAmCmC,SAAnC,EACD,CA/EH,OAiFEC,kBAjFF,CAiFuB,UAAM,CACzB,MAAO,OAAKC,eAAL,CAAqBrC,MAArB,CAAP,CACD,CAnFH,OAqFEsC,iBArFF,CAqFsB,UAAM,CACxB,MAAO,OAAKhC,KAAL,CAAW0B,QAAX,CAAoB/B,MAAM,CAACgC,OAAP,CAAe,GAAf,CAAoB,EAApB,CAApB,CAAP,CACD,CAvFH,OAyFEM,iBAzFF,CAyFsB,SAAAJ,SAAS,CAAI,CAC/B,MAAKN,qBAAL,CAA2B5B,MAA3B,CAAmCkC,SAAnC,EACD,CA3FH,OA6FEK,mBA7FF,CA6FwB,UAAM,CAC1B,MAAO,OAAKH,eAAL,CAAqBpC,MAArB,CAAP,CACD,CA/FH,OAiGEwC,gBAjGF,CAiGqB,UAAM,CACvB,MAAO,OAAKnC,KAAL,CAAWqB,aAAlB,CACD,CAnGH,oGAC6B,gCAANe,IAAM,+CAANA,IAAM,0BACzB,sEAAwBC,KAAxB,CAA8B,IAA9B,CAAoCD,IAApC,EAEA,KAAKE,kBAAL,CAAwB,KAAKC,KAAL,CAAWV,SAAnC,EAHyB,gBAKY,KAAKU,KALjB,CAKjBlC,aALiB,aAKjBA,aALiB,CAKFR,SALE,aAKFA,SALE,CAOzB,KAAKU,QAAL,GACA,KAAKV,SAAL,CAAeA,SAAf,EACA,KAAKQ,aAAL,CAAmBA,aAAnB,EACD,CAXH,uCAqGW,IACCN,CAAAA,EADD,CACQ,KAAKwC,KADb,CACCxC,EADD,CAEP,MAAO,qBAAC,YAAD,EAAc,EAAE,CAAEA,EAAlB,CAAsB,QAAQ,KAA9B,EAAP,CACD,CAED;AA1GF,yBAAiCT,QAAjC,EAAaM,W,CA2GJ4C,Y,CAAe,CACpBX,SAAS,CAAE,EADS,C,CAKxBjC,WAAW,CAAC6C,SAAZ,CAAwB,CACtBC,aAAa,CAAEtD,SAAS,CAACuD,MADH,CAEtBtC,aAAa,CAAEjB,SAAS,CAACwD,IAFH,CAGtB/C,SAAS,CAAET,SAAS,CAACwD,IAHC,CAAxB,CAMA,cAAehD,CAAAA,WAAf","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport $ from \"jquery\";\n\nimport Emulator from \"../Emulator/index\";\nimport EmulatorView from \"../Emulator/EmulatorView\";\n\nimport { getSelectionRange, getStartSelection } from \"../Emulator/controler\";\n\nconst MARK_1 = \"mark-1\";\nconst MARK_3 = \"mark-3\";\n\nexport class ListMapping extends Emulator {\n  componentDidMount(...args) {\n    super.componentDidMount.apply(this, args);\n\n    this.markAllCheckString(this.props.highlight);\n\n    const { onDoubleClick, onMouseUp } = this.props;\n\n    this.onSelect();\n    this.onMouseUp(onMouseUp);\n    this.onDoubleClick(onDoubleClick);\n  }\n\n  onMouseUp = callbackFn => {\n    const { id } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.mouseup(event => {\n      // console.log(`| ========== ${event.type} ========== | `);\n      callbackFn(event);\n      this.clearAllMarkChackString(id);\n    });\n  };\n\n  onDoubleClick = callbackFn => {\n    const { id } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.dblclick(event => {\n      // console.log(`| ========== ${event.type} ========== |`);\n\n      callbackFn(event);\n    });\n  };\n\n  onSelect = () => {\n    const { id, colSize } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.select(event => {\n      // console.log(`| ========== ${event.type} ========== |`);\n      const start = event.target.selectionStart;\n      const end = event.target.selectionEnd;\n      const startPosition = getStartSelection(id, colSize);\n\n      const data = {\n        text: getSelectionRange(id, start, end),\n        row: startPosition.row,\n        col: startPosition.col\n      };\n\n      this.setState({\n        lastSelection: {\n          text: getSelectionRange(id, start, end),\n          row: startPosition.row,\n          col: startPosition.col\n        }\n      });\n\n      if (data.text.length < colSize) {\n        this.markStringChackString(MARK_3, data);\n      } else if (data.col === 1 && data.text.length >= colSize) {\n        this.markStringChackString(MARK_1, data);\n      }\n    });\n  };\n\n  /**\n   * ==================\n   *  provide function\n   * ==================\n   */\n  getListHighlight = () => {\n    const markType = MARK_1;\n    return this.state.markList[markType.replace(\"-\", \"\")];\n  };\n\n  setListHighlight = highlight => {\n    this.markStringChackString(MARK_1, highlight);\n  };\n\n  clearListHighlight = () => {\n    return this.clearMarkString(MARK_1);\n  };\n\n  getFieldHighlight = () => {\n    return this.state.markList[MARK_3.replace(\"-\", \"\")];\n  };\n\n  setFieldHighlight = highlight => {\n    this.markStringChackString(MARK_3, highlight);\n  };\n\n  clearFieldHighlight = () => {\n    return this.clearMarkString(MARK_3);\n  };\n\n  getLastSelection = () => {\n    return this.state.lastSelection;\n  };\n\n  render() {\n    const { id } = this.props;\n    return <EmulatorView id={id} readOnly />;\n  }\n\n  // Set default props\n  static defaultProps = {\n    highlight: {}\n  };\n}\n\nListMapping.propTypes = {\n  highlightList: PropTypes.object,\n  onDoubleClick: PropTypes.func,\n  onMouseUp: PropTypes.func\n};\n\nexport default ListMapping;\n"]},"metadata":{},"sourceType":"module"}