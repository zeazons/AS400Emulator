{"ast":null,"code":"import _classCallCheck from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _get from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/get\";import _inherits from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import PropTypes from\"prop-types\";import $ from\"jquery\";import Emulator from\"../Emulator/index\";import EmulatorView from\"../Emulator/EmulatorView\";import{getIndexByRowCol,getSelectionRange,setSelectionRange,getStartSelection,getEndSelection}from\"../Emulator/controler\";export var ScreenMapping=/*#__PURE__*/function(_Emulator){_inherits(ScreenMapping,_Emulator);function ScreenMapping(){var _getPrototypeOf2;var _this;_classCallCheck(this,ScreenMapping);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ScreenMapping)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.onMouseUp=function(callbackFn){var id=_this.state.id;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.mouseup(function(event){// console.log(`| ========== ${event.type} ========== | `);\ncallbackFn(event);_this.clearAllMarkChackString(id);});};_this.onKeyDown=function(){var _this$state=_this.state,id=_this$state.id,colSize=_this$state.colSize;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.keydown(function(event){// console.log(`| ========== ${event.type} ========== |`);\nvar startSelection=getStartSelection(id,colSize);var endSelection=getEndSelection(id,colSize);var flag=\"field\";// const flag = 'list';\nif(flag===\"list\"){var selectionStart=getIndexByRowCol(startSelection.row,0)+1;var selectionEnd=getIndexByRowCol(endSelection.row,colSize)+2;setSelectionRange(id,selectionStart,selectionEnd);}});};_this.onDoubleClick=function(callbackFn){var id=_this.state.id;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.dblclick(function(event){// console.log(`| ========== ${event.type} ========== |`);\ncallbackFn(event);});};_this.onSelect=function(){var _this$state2=_this.state,id=_this$state2.id,colSize=_this$state2.colSize;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.select(function(event){// console.log(`| ========== ${event.type} ========== |`);\nvar start=event.target.selectionStart;var end=event.target.selectionEnd;var startPosition=getStartSelection(id,colSize);_this.setState({lastSelection:{text:getSelectionRange(id,start,end),row:startPosition.row,col:startPosition.col}});});};_this.getHighlight=function(markType){return _this.state.markList[markType.replace(\"-\",\"\")];};_this.setHighlight=function(markType,highlight){_this.markStringChackString(markType,highlight);};_this.clearHighlight=function(markType){return _this.clearMarkString(markType);};_this.getHighlightList=function(){return _this.state.markList;};_this.setHighlightList=function(highlightList){_this.markAllCheckString(highlightList);};_this.clearHighlightList=function(){_this.clearAllMarkChackString(_this.props.id);};_this.getLastSelection=function(){return _this.state.lastSelection;};return _this;}_createClass(ScreenMapping,[{key:\"componentDidMount\",value:function componentDidMount(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_get(_getPrototypeOf(ScreenMapping.prototype),\"componentDidMount\",this).apply(this,args);this.markAllCheckString(this.props.highlight);var _this$props=this.props,onDoubleClick=_this$props.onDoubleClick,onMouseUp=_this$props.onMouseUp;this.onSelect();this.onKeyDown();this.onMouseUp(onMouseUp);this.onDoubleClick(onDoubleClick);}},{key:\"render\",value:function render(){var _this$props2=this.props,id=_this$props2.id,readOnly=_this$props2.readOnly;return React.createElement(EmulatorView,{id:id,readOnly:readOnly});}// Set default props\n}]);return ScreenMapping;}(Emulator);ScreenMapping.defaultProps={highlight:{}};ScreenMapping.propTypes={highlightList:PropTypes.object,onDoubleClick:PropTypes.func,onMouseUp:PropTypes.func};export default ScreenMapping;","map":{"version":3,"sources":["/Users/jutawuth/Git/SSQUARE/Component-AS400-React/src/components/ScreenMapping/index.jsx"],"names":["React","PropTypes","$","Emulator","EmulatorView","getIndexByRowCol","getSelectionRange","setSelectionRange","getStartSelection","getEndSelection","ScreenMapping","onMouseUp","callbackFn","id","state","elScreen","mouseup","event","clearAllMarkChackString","onKeyDown","colSize","keydown","startSelection","endSelection","flag","selectionStart","row","selectionEnd","onDoubleClick","dblclick","onSelect","select","start","target","end","startPosition","setState","lastSelection","text","col","getHighlight","markType","markList","replace","setHighlight","highlight","markStringChackString","clearHighlight","clearMarkString","getHighlightList","setHighlightList","highlightList","markAllCheckString","clearHighlightList","props","getLastSelection","args","apply","readOnly","defaultProps","propTypes","object","func"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport $ from \"jquery\";\n\nimport Emulator from \"../Emulator/index\";\nimport EmulatorView from \"../Emulator/EmulatorView\";\n\nimport {\n  getIndexByRowCol,\n  getSelectionRange,\n  setSelectionRange,\n  getStartSelection,\n  getEndSelection\n} from \"../Emulator/controler\";\n\nexport class ScreenMapping extends Emulator {\n  componentDidMount(...args) {\n    super.componentDidMount.apply(this, args);\n\n    this.markAllCheckString(this.props.highlight);\n\n    const { onDoubleClick, onMouseUp } = this.props;\n\n    this.onSelect();\n    this.onKeyDown();\n    this.onMouseUp(onMouseUp);\n    this.onDoubleClick(onDoubleClick);\n  }\n\n  onMouseUp = callbackFn => {\n    const { id } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.mouseup(event => {\n      // console.log(`| ========== ${event.type} ========== | `);\n      callbackFn(event);\n      this.clearAllMarkChackString(id);\n    });\n  };\n\n  onKeyDown = () => {\n    const { id, colSize } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.keydown(event => {\n      // console.log(`| ========== ${event.type} ========== |`);\n      const startSelection = getStartSelection(id, colSize);\n      const endSelection = getEndSelection(id, colSize);\n\n      const flag = \"field\";\n      // const flag = 'list';\n      if (flag === \"list\") {\n        const selectionStart = getIndexByRowCol(startSelection.row, 0) + 1;\n        const selectionEnd = getIndexByRowCol(endSelection.row, colSize) + 2;\n\n        setSelectionRange(id, selectionStart, selectionEnd);\n      }\n    });\n  };\n\n  onDoubleClick = callbackFn => {\n    const { id } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.dblclick(event => {\n      // console.log(`| ========== ${event.type} ========== |`);\n      callbackFn(event);\n    });\n  };\n\n  onSelect = () => {\n    const { id, colSize } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.select(event => {\n      // console.log(`| ========== ${event.type} ========== |`);\n      const start = event.target.selectionStart;\n      const end = event.target.selectionEnd;\n      const startPosition = getStartSelection(id, colSize);\n\n      this.setState({\n        lastSelection: {\n          text: getSelectionRange(id, start, end),\n          row: startPosition.row,\n          col: startPosition.col\n        }\n      });\n    });\n  };\n\n  /**\n   * ==================\n   *  provide function\n   * ==================\n   */\n  getHighlight = markType => {\n    return this.state.markList[markType.replace(\"-\", \"\")];\n  };\n\n  setHighlight = (markType, highlight) => {\n    this.markStringChackString(markType, highlight);\n  };\n\n  clearHighlight = markType => {\n    return this.clearMarkString(markType);\n  };\n\n  getHighlightList = () => {\n    return this.state.markList;\n  };\n\n  setHighlightList = highlightList => {\n    this.markAllCheckString(highlightList);\n  };\n\n  clearHighlightList = () => {\n    this.clearAllMarkChackString(this.props.id);\n  };\n\n  getLastSelection = () => {\n    return this.state.lastSelection;\n  };\n\n  render() {\n    const { id, readOnly } = this.props;\n    return <EmulatorView id={id} readOnly={readOnly} />;\n  }\n\n  // Set default props\n  static defaultProps = {\n    highlight: {}\n  };\n}\n\nScreenMapping.propTypes = {\n  highlightList: PropTypes.object,\n  onDoubleClick: PropTypes.func,\n  onMouseUp: PropTypes.func\n};\n\nexport default ScreenMapping;\n"]},"metadata":{},"sourceType":"module"}