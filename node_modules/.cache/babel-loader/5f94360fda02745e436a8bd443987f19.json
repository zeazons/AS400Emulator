{"ast":null,"code":"import $ from\"jquery\";import _ from\"lodash\";export var getHighlightDefault=function getHighlightDefault(rowSize,colSize){var textHighlight=\"\";for(var i=0;i<rowSize;i+=1){for(var j=0;j<colSize;j+=1){textHighlight+=\".\";}textHighlight+=\"\\n\";}return textHighlight;};export var getIndexByRowCol=function getIndexByRowCol(row,colSize){return(row-1)*80+colSize+row-2;};export var setSelectionRange=function setSelectionRange(elStr,selectionStart,selectionEnd){var elScreen=$(\".\".concat(elStr,\".as400-screen\"))[0];var start=selectionStart;var end=selectionEnd;start-=1;end-=1;// elScreen.focus();\nif(elScreen.setSelectionRange){elScreen.setSelectionRange(start,end);}else if(elScreen.createTextRange){var range=elScreen.createTextRange();range.collapse(true);range.moveEnd(\"character\",end);range.moveStart(\"character\",start);range.select();}};// const clearHighlight = (elStr, markType) => {\n//   const elHighlight = $(`.${elStr}.as400-highlight`);\n//   let newHighlight = elHighlight.html();\n//   newHighlight = newHighlight\n//     .replace(`<as400-${markType}>`, \"\")\n//     .replace(`</as400-${markType}>`, \"\");\n//   elHighlight.html(newHighlight);\n// };\nexport var getAS400Cursor=function getAS400Cursor(posStr){var posArr=posStr.split(\",\");return{row:parseInt(posArr[0]),col:parseInt(posArr[1])};};// const convertRowColNumber = posStr => {\n//   const posArr = posStr.trim().split(\",\");\n//   return {\n//     row: posArr[0],\n//     col: posArr[1]\n//   };\n// };\nvar getRowNumberByIndex=function getRowNumberByIndex(elStr,index){var elScreen=$(\".\".concat(elStr,\".as400-screen\"));return elScreen.val().substr(0,index).split(\"\\n\").length-1;};var getColNumberByIndex=function getColNumberByIndex(elStr,index,colSize){var row=getRowNumberByIndex(elStr,index);var col=(index-row)%colSize;if(index===colSize*(row+1)+row){return colSize;}return col;};export var setIndexByRowCol=function setIndexByRowCol(elStr,row,col){var index=getIndexByRowCol(row,col);setSelectionRange(elStr,index,index);};export var getStartSelection=function getStartSelection(elStr,colSize){var elScreen=$(\".\".concat(elStr,\".as400-screen\"));var startIndex=elScreen.prop(\"selectionStart\");var rowSelectionStartIndex=getRowNumberByIndex(elStr,startIndex)+1;var colSelectionStartIndex=getColNumberByIndex(elStr,startIndex,colSize)+1;return{row:rowSelectionStartIndex,col:colSelectionStartIndex};};export var getEndSelection=function getEndSelection(elStr,colSize){var elScreen=$(\".\".concat(elStr,\".as400-screen\"));var endIndex=elScreen.prop(\"selectionEnd\");var rowSelectionEndIndex=getRowNumberByIndex(elStr,endIndex)+1;var colSelectionEndIndex=getColNumberByIndex(elStr,endIndex,colSize)+1;return{row:rowSelectionEndIndex,col:colSelectionEndIndex};};export var getSelectionRange=function getSelectionRange(elStr,selectionStart,selectionEnd){var elScreen=$(\".\".concat(elStr,\".as400-screen\"));if(selectionStart!==selectionEnd){var selection=elScreen.val().substring(selectionStart,selectionEnd);return selection;}return\"\";};export var initScreen=function initScreen(elStr,rowSize,colSize){var elScreen=$(\".\".concat(elStr,\".as400-screen\"));elScreen.attr(\"rows\",rowSize);elScreen.attr(\"cols\",colSize);var elScreenTemp=$(\".\".concat(elStr,\".as400-screen-temp\"));elScreenTemp.attr(\"rows\",rowSize);elScreenTemp.attr(\"cols\",colSize);var elStyle=$(\".\".concat(elStr,\".as400-style\"));elStyle.attr(\"rows\",rowSize);elStyle.attr(\"cols\",colSize);var elHighlight=$(\".\".concat(elStr,\".as400-highlight\"));elHighlight.html(getHighlightDefault(rowSize,colSize));};export var setAs400Screen=function setAs400Screen(elStr,data){var elScreen=$(\".\".concat(elStr,\".as400-screen\"));elScreen.val(data);};export var setAs400Style=function setAs400Style(elStr,text,styleParams){var elStyle=$(\".\".concat(elStr,\".as400-style\"));var style=styleParams;var textStyle=\"\";for(var i=0;i<text.length;i+=1){var character=text[i];var styleCharacter=style[i];if(styleCharacter!==\".\"&&!$.isEmptyObject(styleCharacter)){textStyle+=character.replace(character,\"<as400-\".concat(styleCharacter.toLowerCase(),\"-style>$&</as400-\").concat(styleCharacter.toLowerCase(),\"-style>\"));}else{textStyle+=character;}}$(elStyle).html(textStyle);};export var setAS400Cursor=function setAS400Cursor(elStr,data){var pos=getAS400Cursor(data);var index=getIndexByRowCol(pos.row,pos.col);setSelectionRange(elStr,index,index);};export var markAllCheckStringOnScreen=function markAllCheckStringOnScreen(id,markListData){var elHighlight=$(\".\".concat(id,\".as400-highlight\"));var text=elHighlight[0].innerHTML;var textHighlight=\"\";for(var i=0;i<text.length;i+=1){if(!_.isEmpty(markListData.mark1)&&i===getIndexByRowCol(markListData.mark1.row,markListData.mark1.col)){if(markListData.mark1.text.length<2){textHighlight+=\"<as400-mark-1>\".concat(text[i],\"</as400-mark-1>\");}else{textHighlight+=\"<as400-mark-1>\".concat(text[i]);}}else if(!_.isEmpty(markListData.mark1)&&i===getIndexByRowCol(markListData.mark1.row,markListData.mark1.col)+markListData.mark1.text.length-1){textHighlight+=\"\".concat(text[i],\"</as400-mark-1>\");}else if(!_.isEmpty(markListData.mark2)&&i===getIndexByRowCol(markListData.mark2.row,markListData.mark2.col)){if(markListData.mark2.text.length<2){textHighlight+=\"<as400-mark-2>\".concat(text[i],\"</as400-mark-2>\");}else{textHighlight+=\"<as400-mark-2>\".concat(text[i]);}}else if(!_.isEmpty(markListData.mark2)&&i===getIndexByRowCol(markListData.mark2.row,markListData.mark2.col)+markListData.mark2.text.length-1){textHighlight+=\"\".concat(text[i],\"</as400-mark-2>\");}else if(!_.isEmpty(markListData.mark3)&&i===getIndexByRowCol(markListData.mark3.row,markListData.mark3.col)){if(markListData.mark3.text.length<2){textHighlight+=\"<as400-mark-3>\".concat(text[i],\"</as400-mark-3>\");}else{textHighlight+=\"<as400-mark-3>\".concat(text[i]);}}else if(!_.isEmpty(markListData.mark3)&&i===getIndexByRowCol(markListData.mark3.row,markListData.mark3.col)+markListData.mark3.text.length-1){textHighlight+=\"\".concat(text[i],\"</as400-mark-3>\");}else{textHighlight+=text[i];}}elHighlight.html(textHighlight);};","map":{"version":3,"sources":["/Users/jutawuth/Git/SSQUARE/Component-AS400-React/src/components/Emulator/controler.js"],"names":["$","_","getHighlightDefault","rowSize","colSize","textHighlight","i","j","getIndexByRowCol","row","setSelectionRange","elStr","selectionStart","selectionEnd","elScreen","start","end","createTextRange","range","collapse","moveEnd","moveStart","select","getAS400Cursor","posStr","posArr","split","parseInt","col","getRowNumberByIndex","index","val","substr","length","getColNumberByIndex","setIndexByRowCol","getStartSelection","startIndex","prop","rowSelectionStartIndex","colSelectionStartIndex","getEndSelection","endIndex","rowSelectionEndIndex","colSelectionEndIndex","getSelectionRange","selection","substring","initScreen","attr","elScreenTemp","elStyle","elHighlight","html","setAs400Screen","data","setAs400Style","text","styleParams","style","textStyle","character","styleCharacter","isEmptyObject","replace","toLowerCase","setAS400Cursor","pos","markAllCheckStringOnScreen","id","markListData","innerHTML","isEmpty","mark1","mark2","mark3"],"mappings":"AAAA,MAAOA,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CAEA,MAAO,IAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,OAAD,CAAUC,OAAV,CAAsB,CACvD,GAAIC,CAAAA,aAAa,CAAG,EAApB,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGH,OAApB,CAA6BG,CAAC,EAAI,CAAlC,CAAqC,CACnC,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGH,OAApB,CAA6BG,CAAC,EAAI,CAAlC,CAAqC,CACnCF,aAAa,EAAI,GAAjB,CACD,CACDA,aAAa,EAAI,IAAjB,CACD,CACD,MAAOA,CAAAA,aAAP,CACD,CATM,CAWP,MAAO,IAAMG,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,GAAD,CAAML,OAAN,QAC9B,CAACK,GAAG,CAAG,CAAP,EAAY,EAAZ,CAAiBL,OAAjB,CAA2BK,GAA3B,CAAiC,CADH,EAAzB,CAGP,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAAQC,cAAR,CAAwBC,YAAxB,CAAyC,CACxE,GAAMC,CAAAA,QAAQ,CAAGd,CAAC,YAAKW,KAAL,kBAAD,CAA4B,CAA5B,CAAjB,CAEA,GAAII,CAAAA,KAAK,CAAGH,cAAZ,CACA,GAAII,CAAAA,GAAG,CAAGH,YAAV,CAEAE,KAAK,EAAI,CAAT,CACAC,GAAG,EAAI,CAAP,CAEA;AACA,GAAIF,QAAQ,CAACJ,iBAAb,CAAgC,CAC9BI,QAAQ,CAACJ,iBAAT,CAA2BK,KAA3B,CAAkCC,GAAlC,EACD,CAFD,IAEO,IAAIF,QAAQ,CAACG,eAAb,CAA8B,CACnC,GAAMC,CAAAA,KAAK,CAAGJ,QAAQ,CAACG,eAAT,EAAd,CACAC,KAAK,CAACC,QAAN,CAAe,IAAf,EACAD,KAAK,CAACE,OAAN,CAAc,WAAd,CAA2BJ,GAA3B,EACAE,KAAK,CAACG,SAAN,CAAgB,WAAhB,CAA6BN,KAA7B,EACAG,KAAK,CAACI,MAAN,GACD,CACF,CAnBM,CAqBP;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,MAAM,CAAI,CACtC,GAAMC,CAAAA,MAAM,CAAGD,MAAM,CAACE,KAAP,CAAa,GAAb,CAAf,CAEA,MAAO,CACLjB,GAAG,CAAEkB,QAAQ,CAACF,MAAM,CAAC,CAAD,CAAP,CADR,CAELG,GAAG,CAAED,QAAQ,CAACF,MAAM,CAAC,CAAD,CAAP,CAFR,CAAP,CAID,CAPM,CASP;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAMI,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAAClB,KAAD,CAAQmB,KAAR,CAAkB,CAC5C,GAAMhB,CAAAA,QAAQ,CAAGd,CAAC,YAAKW,KAAL,kBAAlB,CACA,MACEG,CAAAA,QAAQ,CACPiB,GADD,GAECC,MAFD,CAEQ,CAFR,CAEWF,KAFX,EAGCJ,KAHD,CAGO,IAHP,EAGaO,MAHb,CAGsB,CAJxB,CAMD,CARD,CAUA,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACvB,KAAD,CAAQmB,KAAR,CAAe1B,OAAf,CAA2B,CACrD,GAAMK,CAAAA,GAAG,CAAGoB,mBAAmB,CAAClB,KAAD,CAAQmB,KAAR,CAA/B,CACA,GAAMF,CAAAA,GAAG,CAAG,CAACE,KAAK,CAAGrB,GAAT,EAAgBL,OAA5B,CAEA,GAAI0B,KAAK,GAAK1B,OAAO,EAAIK,GAAG,CAAG,CAAV,CAAP,CAAsBA,GAApC,CAAyC,CACvC,MAAOL,CAAAA,OAAP,CACD,CACD,MAAOwB,CAAAA,GAAP,CACD,CARD,CAUA,MAAO,IAAMO,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACxB,KAAD,CAAQF,GAAR,CAAamB,GAAb,CAAqB,CACnD,GAAME,CAAAA,KAAK,CAAGtB,gBAAgB,CAACC,GAAD,CAAMmB,GAAN,CAA9B,CACAlB,iBAAiB,CAACC,KAAD,CAAQmB,KAAR,CAAeA,KAAf,CAAjB,CACD,CAHM,CAKP,MAAO,IAAMM,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACzB,KAAD,CAAQP,OAAR,CAAoB,CACnD,GAAMU,CAAAA,QAAQ,CAAGd,CAAC,YAAKW,KAAL,kBAAlB,CACA,GAAM0B,CAAAA,UAAU,CAAGvB,QAAQ,CAACwB,IAAT,CAAc,gBAAd,CAAnB,CAEA,GAAMC,CAAAA,sBAAsB,CAAGV,mBAAmB,CAAClB,KAAD,CAAQ0B,UAAR,CAAnB,CAAyC,CAAxE,CACA,GAAMG,CAAAA,sBAAsB,CAC1BN,mBAAmB,CAACvB,KAAD,CAAQ0B,UAAR,CAAoBjC,OAApB,CAAnB,CAAkD,CADpD,CAGA,MAAO,CACLK,GAAG,CAAE8B,sBADA,CAELX,GAAG,CAAEY,sBAFA,CAAP,CAID,CAZM,CAcP,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAC9B,KAAD,CAAQP,OAAR,CAAoB,CACjD,GAAMU,CAAAA,QAAQ,CAAGd,CAAC,YAAKW,KAAL,kBAAlB,CACA,GAAM+B,CAAAA,QAAQ,CAAG5B,QAAQ,CAACwB,IAAT,CAAc,cAAd,CAAjB,CACA,GAAMK,CAAAA,oBAAoB,CAAGd,mBAAmB,CAAClB,KAAD,CAAQ+B,QAAR,CAAnB,CAAuC,CAApE,CACA,GAAME,CAAAA,oBAAoB,CACxBV,mBAAmB,CAACvB,KAAD,CAAQ+B,QAAR,CAAkBtC,OAAlB,CAAnB,CAAgD,CADlD,CAGA,MAAO,CACLK,GAAG,CAAEkC,oBADA,CAELf,GAAG,CAAEgB,oBAFA,CAAP,CAID,CAXM,CAaP,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAClC,KAAD,CAAQC,cAAR,CAAwBC,YAAxB,CAAyC,CACxE,GAAMC,CAAAA,QAAQ,CAAGd,CAAC,YAAKW,KAAL,kBAAlB,CAEA,GAAIC,cAAc,GAAKC,YAAvB,CAAqC,CACnC,GAAMiC,CAAAA,SAAS,CAAGhC,QAAQ,CAACiB,GAAT,GAAegB,SAAf,CAAyBnC,cAAzB,CAAyCC,YAAzC,CAAlB,CACA,MAAOiC,CAAAA,SAAP,CACD,CACD,MAAO,EAAP,CACD,CARM,CAUP,MAAO,IAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACrC,KAAD,CAAQR,OAAR,CAAiBC,OAAjB,CAA6B,CACrD,GAAMU,CAAAA,QAAQ,CAAGd,CAAC,YAAKW,KAAL,kBAAlB,CACAG,QAAQ,CAACmC,IAAT,CAAc,MAAd,CAAsB9C,OAAtB,EACAW,QAAQ,CAACmC,IAAT,CAAc,MAAd,CAAsB7C,OAAtB,EAEA,GAAM8C,CAAAA,YAAY,CAAGlD,CAAC,YAAKW,KAAL,uBAAtB,CACAuC,YAAY,CAACD,IAAb,CAAkB,MAAlB,CAA0B9C,OAA1B,EACA+C,YAAY,CAACD,IAAb,CAAkB,MAAlB,CAA0B7C,OAA1B,EAEA,GAAM+C,CAAAA,OAAO,CAAGnD,CAAC,YAAKW,KAAL,iBAAjB,CACAwC,OAAO,CAACF,IAAR,CAAa,MAAb,CAAqB9C,OAArB,EACAgD,OAAO,CAACF,IAAR,CAAa,MAAb,CAAqB7C,OAArB,EAEA,GAAMgD,CAAAA,WAAW,CAAGpD,CAAC,YAAKW,KAAL,qBAArB,CACAyC,WAAW,CAACC,IAAZ,CAAiBnD,mBAAmB,CAACC,OAAD,CAAUC,OAAV,CAApC,EACD,CAfM,CAiBP,MAAO,IAAMkD,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAC3C,KAAD,CAAQ4C,IAAR,CAAiB,CAC7C,GAAMzC,CAAAA,QAAQ,CAAGd,CAAC,YAAKW,KAAL,kBAAlB,CACAG,QAAQ,CAACiB,GAAT,CAAawB,IAAb,EACD,CAHM,CAKP,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAC7C,KAAD,CAAQ8C,IAAR,CAAcC,WAAd,CAA8B,CACzD,GAAMP,CAAAA,OAAO,CAAGnD,CAAC,YAAKW,KAAL,iBAAjB,CAEA,GAAIgD,CAAAA,KAAK,CAAGD,WAAZ,CAEA,GAAIE,CAAAA,SAAS,CAAG,EAAhB,CACA,IAAK,GAAItD,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGmD,IAAI,CAACxB,MAAzB,CAAiC3B,CAAC,EAAI,CAAtC,CAAyC,CACvC,GAAMuD,CAAAA,SAAS,CAAGJ,IAAI,CAACnD,CAAD,CAAtB,CACA,GAAMwD,CAAAA,cAAc,CAAGH,KAAK,CAACrD,CAAD,CAA5B,CAEA,GAAIwD,cAAc,GAAK,GAAnB,EAA0B,CAAC9D,CAAC,CAAC+D,aAAF,CAAgBD,cAAhB,CAA/B,CAAgE,CAC9DF,SAAS,EAAIC,SAAS,CAACG,OAAV,CACXH,SADW,kBAEDC,cAAc,CAACG,WAAf,EAFC,6BAE+CH,cAAc,CAACG,WAAf,EAF/C,YAAb,CAID,CALD,IAKO,CACLL,SAAS,EAAIC,SAAb,CACD,CACF,CAED7D,CAAC,CAACmD,OAAD,CAAD,CAAWE,IAAX,CAAgBO,SAAhB,EACD,CArBM,CAuBP,MAAO,IAAMM,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACvD,KAAD,CAAQ4C,IAAR,CAAiB,CAC7C,GAAMY,CAAAA,GAAG,CAAG5C,cAAc,CAACgC,IAAD,CAA1B,CAEA,GAAMzB,CAAAA,KAAK,CAAGtB,gBAAgB,CAAC2D,GAAG,CAAC1D,GAAL,CAAU0D,GAAG,CAACvC,GAAd,CAA9B,CAEAlB,iBAAiB,CAACC,KAAD,CAAQmB,KAAR,CAAeA,KAAf,CAAjB,CACD,CANM,CAQP,MAAO,IAAMsC,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,CAACC,EAAD,CAAKC,YAAL,CAAsB,CAC9D,GAAMlB,CAAAA,WAAW,CAAGpD,CAAC,YAAKqE,EAAL,qBAArB,CACA,GAAMZ,CAAAA,IAAI,CAAGL,WAAW,CAAC,CAAD,CAAX,CAAemB,SAA5B,CACA,GAAIlE,CAAAA,aAAa,CAAG,EAApB,CAEA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGmD,IAAI,CAACxB,MAAzB,CAAiC3B,CAAC,EAAI,CAAtC,CAAyC,CACvC,GACE,CAACL,CAAC,CAACuE,OAAF,CAAUF,YAAY,CAACG,KAAvB,CAAD,EACAnE,CAAC,GAAKE,gBAAgB,CAAC8D,YAAY,CAACG,KAAb,CAAmBhE,GAApB,CAAyB6D,YAAY,CAACG,KAAb,CAAmB7C,GAA5C,CAFxB,CAGE,CACA,GAAI0C,YAAY,CAACG,KAAb,CAAmBhB,IAAnB,CAAwBxB,MAAxB,CAAiC,CAArC,CAAwC,CACtC5B,aAAa,0BAAqBoD,IAAI,CAACnD,CAAD,CAAzB,mBAAb,CACD,CAFD,IAEO,CACLD,aAAa,0BAAqBoD,IAAI,CAACnD,CAAD,CAAzB,CAAb,CACD,CACF,CATD,IASO,IACL,CAACL,CAAC,CAACuE,OAAF,CAAUF,YAAY,CAACG,KAAvB,CAAD,EACAnE,CAAC,GACDE,gBAAgB,CAAC8D,YAAY,CAACG,KAAb,CAAmBhE,GAApB,CAAyB6D,YAAY,CAACG,KAAb,CAAmB7C,GAA5C,CAAhB,CACA0C,YAAY,CAACG,KAAb,CAAmBhB,IAAnB,CAAwBxB,MADxB,CAEA,CALK,CAML,CACA5B,aAAa,YAAOoD,IAAI,CAACnD,CAAD,CAAX,mBAAb,CACD,CARM,IAQA,IACL,CAACL,CAAC,CAACuE,OAAF,CAAUF,YAAY,CAACI,KAAvB,CAAD,EACApE,CAAC,GAAKE,gBAAgB,CAAC8D,YAAY,CAACI,KAAb,CAAmBjE,GAApB,CAAyB6D,YAAY,CAACI,KAAb,CAAmB9C,GAA5C,CAFjB,CAGL,CACA,GAAI0C,YAAY,CAACI,KAAb,CAAmBjB,IAAnB,CAAwBxB,MAAxB,CAAiC,CAArC,CAAwC,CACtC5B,aAAa,0BAAqBoD,IAAI,CAACnD,CAAD,CAAzB,mBAAb,CACD,CAFD,IAEO,CACLD,aAAa,0BAAqBoD,IAAI,CAACnD,CAAD,CAAzB,CAAb,CACD,CACF,CATM,IASA,IACL,CAACL,CAAC,CAACuE,OAAF,CAAUF,YAAY,CAACI,KAAvB,CAAD,EACApE,CAAC,GACDE,gBAAgB,CAAC8D,YAAY,CAACI,KAAb,CAAmBjE,GAApB,CAAyB6D,YAAY,CAACI,KAAb,CAAmB9C,GAA5C,CAAhB,CACA0C,YAAY,CAACI,KAAb,CAAmBjB,IAAnB,CAAwBxB,MADxB,CAEA,CALK,CAML,CACA5B,aAAa,YAAOoD,IAAI,CAACnD,CAAD,CAAX,mBAAb,CACD,CARM,IAQA,IACL,CAACL,CAAC,CAACuE,OAAF,CAAUF,YAAY,CAACK,KAAvB,CAAD,EACArE,CAAC,GAAKE,gBAAgB,CAAC8D,YAAY,CAACK,KAAb,CAAmBlE,GAApB,CAAyB6D,YAAY,CAACK,KAAb,CAAmB/C,GAA5C,CAFjB,CAGL,CACA,GAAI0C,YAAY,CAACK,KAAb,CAAmBlB,IAAnB,CAAwBxB,MAAxB,CAAiC,CAArC,CAAwC,CACtC5B,aAAa,0BAAqBoD,IAAI,CAACnD,CAAD,CAAzB,mBAAb,CACD,CAFD,IAEO,CACLD,aAAa,0BAAqBoD,IAAI,CAACnD,CAAD,CAAzB,CAAb,CACD,CACF,CATM,IASA,IACL,CAACL,CAAC,CAACuE,OAAF,CAAUF,YAAY,CAACK,KAAvB,CAAD,EACArE,CAAC,GACDE,gBAAgB,CAAC8D,YAAY,CAACK,KAAb,CAAmBlE,GAApB,CAAyB6D,YAAY,CAACK,KAAb,CAAmB/C,GAA5C,CAAhB,CACA0C,YAAY,CAACK,KAAb,CAAmBlB,IAAnB,CAAwBxB,MADxB,CAEA,CALK,CAML,CACA5B,aAAa,YAAOoD,IAAI,CAACnD,CAAD,CAAX,mBAAb,CACD,CARM,IAQA,CACLD,aAAa,EAAIoD,IAAI,CAACnD,CAAD,CAArB,CACD,CACF,CAED8C,WAAW,CAACC,IAAZ,CAAiBhD,aAAjB,EACD,CA/DM","sourcesContent":["import $ from \"jquery\";\nimport _ from \"lodash\";\n\nexport const getHighlightDefault = (rowSize, colSize) => {\n  let textHighlight = \"\";\n  for (let i = 0; i < rowSize; i += 1) {\n    for (let j = 0; j < colSize; j += 1) {\n      textHighlight += \".\";\n    }\n    textHighlight += \"\\n\";\n  }\n  return textHighlight;\n};\n\nexport const getIndexByRowCol = (row, colSize) =>\n  (row - 1) * 80 + colSize + row - 2;\n\nexport const setSelectionRange = (elStr, selectionStart, selectionEnd) => {\n  const elScreen = $(`.${elStr}.as400-screen`)[0];\n\n  let start = selectionStart;\n  let end = selectionEnd;\n\n  start -= 1;\n  end -= 1;\n\n  // elScreen.focus();\n  if (elScreen.setSelectionRange) {\n    elScreen.setSelectionRange(start, end);\n  } else if (elScreen.createTextRange) {\n    const range = elScreen.createTextRange();\n    range.collapse(true);\n    range.moveEnd(\"character\", end);\n    range.moveStart(\"character\", start);\n    range.select();\n  }\n};\n\n// const clearHighlight = (elStr, markType) => {\n//   const elHighlight = $(`.${elStr}.as400-highlight`);\n//   let newHighlight = elHighlight.html();\n\n//   newHighlight = newHighlight\n//     .replace(`<as400-${markType}>`, \"\")\n//     .replace(`</as400-${markType}>`, \"\");\n\n//   elHighlight.html(newHighlight);\n// };\n\nexport const getAS400Cursor = posStr => {\n  const posArr = posStr.split(\",\");\n\n  return {\n    row: parseInt(posArr[0]),\n    col: parseInt(posArr[1])\n  };\n};\n\n// const convertRowColNumber = posStr => {\n//   const posArr = posStr.trim().split(\",\");\n//   return {\n//     row: posArr[0],\n//     col: posArr[1]\n//   };\n// };\n\nconst getRowNumberByIndex = (elStr, index) => {\n  const elScreen = $(`.${elStr}.as400-screen`);\n  return (\n    elScreen\n    .val()\n    .substr(0, index)\n    .split(\"\\n\").length - 1\n  );\n};\n\nconst getColNumberByIndex = (elStr, index, colSize) => {\n  const row = getRowNumberByIndex(elStr, index);\n  const col = (index - row) % colSize;\n\n  if (index === colSize * (row + 1) + row) {\n    return colSize;\n  }\n  return col;\n};\n\nexport const setIndexByRowCol = (elStr, row, col) => {\n  const index = getIndexByRowCol(row, col);\n  setSelectionRange(elStr, index, index);\n};\n\nexport const getStartSelection = (elStr, colSize) => {\n  const elScreen = $(`.${elStr}.as400-screen`);\n  const startIndex = elScreen.prop(\"selectionStart\");\n\n  const rowSelectionStartIndex = getRowNumberByIndex(elStr, startIndex) + 1;\n  const colSelectionStartIndex =\n    getColNumberByIndex(elStr, startIndex, colSize) + 1;\n\n  return {\n    row: rowSelectionStartIndex,\n    col: colSelectionStartIndex\n  };\n};\n\nexport const getEndSelection = (elStr, colSize) => {\n  const elScreen = $(`.${elStr}.as400-screen`);\n  const endIndex = elScreen.prop(\"selectionEnd\");\n  const rowSelectionEndIndex = getRowNumberByIndex(elStr, endIndex) + 1;\n  const colSelectionEndIndex =\n    getColNumberByIndex(elStr, endIndex, colSize) + 1;\n\n  return {\n    row: rowSelectionEndIndex,\n    col: colSelectionEndIndex\n  };\n};\n\nexport const getSelectionRange = (elStr, selectionStart, selectionEnd) => {\n  const elScreen = $(`.${elStr}.as400-screen`);\n\n  if (selectionStart !== selectionEnd) {\n    const selection = elScreen.val().substring(selectionStart, selectionEnd);\n    return selection;\n  }\n  return \"\";\n};\n\nexport const initScreen = (elStr, rowSize, colSize) => {\n  const elScreen = $(`.${elStr}.as400-screen`);\n  elScreen.attr(\"rows\", rowSize);\n  elScreen.attr(\"cols\", colSize);\n\n  const elScreenTemp = $(`.${elStr}.as400-screen-temp`);\n  elScreenTemp.attr(\"rows\", rowSize);\n  elScreenTemp.attr(\"cols\", colSize);\n\n  const elStyle = $(`.${elStr}.as400-style`);\n  elStyle.attr(\"rows\", rowSize);\n  elStyle.attr(\"cols\", colSize);\n\n  const elHighlight = $(`.${elStr}.as400-highlight`);\n  elHighlight.html(getHighlightDefault(rowSize, colSize));\n};\n\nexport const setAs400Screen = (elStr, data) => {\n  const elScreen = $(`.${elStr}.as400-screen`);\n  elScreen.val(data);\n};\n\nexport const setAs400Style = (elStr, text, styleParams) => {\n  const elStyle = $(`.${elStr}.as400-style`);\n\n  let style = styleParams;\n\n  let textStyle = \"\";\n  for (let i = 0; i < text.length; i += 1) {\n    const character = text[i];\n    const styleCharacter = style[i];\n\n    if (styleCharacter !== \".\" && !$.isEmptyObject(styleCharacter)) {\n      textStyle += character.replace(\n        character,\n        `<as400-${styleCharacter.toLowerCase()}-style>$&</as400-${styleCharacter.toLowerCase()}-style>`\n      );\n    } else {\n      textStyle += character;\n    }\n  }\n\n  $(elStyle).html(textStyle);\n};\n\nexport const setAS400Cursor = (elStr, data) => {\n  const pos = getAS400Cursor(data);\n\n  const index = getIndexByRowCol(pos.row, pos.col);\n\n  setSelectionRange(elStr, index, index);\n};\n\nexport const markAllCheckStringOnScreen = (id, markListData) => {\n  const elHighlight = $(`.${id}.as400-highlight`);\n  const text = elHighlight[0].innerHTML;\n  let textHighlight = \"\";\n\n  for (let i = 0; i < text.length; i += 1) {\n    if (\n      !_.isEmpty(markListData.mark1) &&\n      i === getIndexByRowCol(markListData.mark1.row, markListData.mark1.col)\n    ) {\n      if (markListData.mark1.text.length < 2) {\n        textHighlight += `<as400-mark-1>${text[i]}</as400-mark-1>`;\n      } else {\n        textHighlight += `<as400-mark-1>${text[i]}`;\n      }\n    } else if (\n      !_.isEmpty(markListData.mark1) &&\n      i ===\n      getIndexByRowCol(markListData.mark1.row, markListData.mark1.col) +\n      markListData.mark1.text.length -\n      1\n    ) {\n      textHighlight += `${text[i]}</as400-mark-1>`;\n    } else if (\n      !_.isEmpty(markListData.mark2) &&\n      i === getIndexByRowCol(markListData.mark2.row, markListData.mark2.col)\n    ) {\n      if (markListData.mark2.text.length < 2) {\n        textHighlight += `<as400-mark-2>${text[i]}</as400-mark-2>`;\n      } else {\n        textHighlight += `<as400-mark-2>${text[i]}`;\n      }\n    } else if (\n      !_.isEmpty(markListData.mark2) &&\n      i ===\n      getIndexByRowCol(markListData.mark2.row, markListData.mark2.col) +\n      markListData.mark2.text.length -\n      1\n    ) {\n      textHighlight += `${text[i]}</as400-mark-2>`;\n    } else if (\n      !_.isEmpty(markListData.mark3) &&\n      i === getIndexByRowCol(markListData.mark3.row, markListData.mark3.col)\n    ) {\n      if (markListData.mark3.text.length < 2) {\n        textHighlight += `<as400-mark-3>${text[i]}</as400-mark-3>`;\n      } else {\n        textHighlight += `<as400-mark-3>${text[i]}`;\n      }\n    } else if (\n      !_.isEmpty(markListData.mark3) &&\n      i ===\n      getIndexByRowCol(markListData.mark3.row, markListData.mark3.col) +\n      markListData.mark3.text.length -\n      1\n    ) {\n      textHighlight += `${text[i]}</as400-mark-3>`;\n    } else {\n      textHighlight += text[i];\n    }\n  }\n\n  elHighlight.html(textHighlight);\n};"]},"metadata":{},"sourceType":"module"}