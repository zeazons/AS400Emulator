{"ast":null,"code":"import _classCallCheck from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _get from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/get\";import _inherits from\"/Users/jutawuth/Git/SSQUARE/Component-AS400-React/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import PropTypes from\"prop-types\";import $ from\"jquery\";import Emulator from\"../Emulator/index\";import EmulatorView from\"../Emulator/EmulatorView\";import{getSelectionRange,getStartSelection}from\"../Emulator/controler\";var MARK_1=\"mark-1\";export var FieldsMapping=/*#__PURE__*/function(_Emulator){_inherits(FieldsMapping,_Emulator);function FieldsMapping(){var _getPrototypeOf2;var _this;_classCallCheck(this,FieldsMapping);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FieldsMapping)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.onMouseUp=function(callbackFn){var id=_this.state.id;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.mouseup(function(event){// console.log(`| ========== ${event.type} ========== | `);\ncallbackFn(event);_this.clearAllMarkChackString(id);});};_this.onDoubleClick=function(callbackFn){var id=_this.state.id;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.dblclick(function(event){// console.log(`| ========== ${event.type} ========== |`);\ncallbackFn(event);});};_this.onSelect=function(){var _this$state=_this.state,id=_this$state.id,colSize=_this$state.colSize;var elScreen=$(\".\".concat(id,\".as400-screen\"));elScreen.select(function(event){// console.log(`| ========== ${event.type} ========== |`);\nvar start=event.target.selectionStart;var end=event.target.selectionEnd;var startPosition=getStartSelection(id,colSize);var data={text:getSelectionRange(id,start,end),row:startPosition.row,col:startPosition.col};_this.setState({lastSelection:{text:getSelectionRange(id,start,end),row:startPosition.row,col:startPosition.col}});_this.markStringChackString(MARK_1,data);});};_this.getFieldHighlight=function(){return _this.state.markList[MARK_1.replace(\"-\",\"\")];};_this.setFieldHighlight=function(highlight){_this.markStringChackString(MARK_1,highlight);};_this.clearFieldHighlight=function(){return _this.clearMarkString(MARK_1);};_this.getLastSelection=function(){return _this.state.lastSelection;};return _this;}_createClass(FieldsMapping,[{key:\"componentDidMount\",value:function componentDidMount(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_get(_getPrototypeOf(FieldsMapping.prototype),\"componentDidMount\",this).apply(this,args);this.markAllCheckString(this.props.highlight);var _this$props=this.props,onDoubleClick=_this$props.onDoubleClick,onMouseUp=_this$props.onMouseUp;this.onSelect();this.onMouseUp(onMouseUp);this.onDoubleClick(onDoubleClick);}},{key:\"render\",value:function render(){var id=this.props.id;return React.createElement(EmulatorView,{id:id,readOnly:true});}// Set default props\n}]);return FieldsMapping;}(Emulator);FieldsMapping.defaultProps={highlight:{}};FieldsMapping.propTypes={highlightList:PropTypes.object,onDoubleClick:PropTypes.func,onMouseUp:PropTypes.func};export default FieldsMapping;","map":{"version":3,"sources":["/Users/jutawuth/Git/SSQUARE/Component-AS400-React/src/components/FieldsMapping/index.jsx"],"names":["React","PropTypes","$","Emulator","EmulatorView","getSelectionRange","getStartSelection","MARK_1","FieldsMapping","onMouseUp","callbackFn","id","state","elScreen","mouseup","event","clearAllMarkChackString","onDoubleClick","dblclick","onSelect","colSize","select","start","target","selectionStart","end","selectionEnd","startPosition","data","text","row","col","setState","lastSelection","markStringChackString","getFieldHighlight","markList","replace","setFieldHighlight","highlight","clearFieldHighlight","clearMarkString","getLastSelection","args","apply","markAllCheckString","props","defaultProps","propTypes","highlightList","object","func"],"mappings":"kxBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CAEA,MAAOC,CAAAA,QAAP,KAAqB,mBAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,0BAAzB,CAEA,OAASC,iBAAT,CAA4BC,iBAA5B,KAAqD,uBAArD,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAAf,CAEA,UAAaC,CAAAA,aAAb,yZAaEC,SAbF,CAac,SAAAC,UAAU,CAAI,IAChBC,CAAAA,EADgB,CACT,MAAKC,KADI,CAChBD,EADgB,CAExB,GAAME,CAAAA,QAAQ,CAAGX,CAAC,YAAKS,EAAL,kBAAlB,CAEAE,QAAQ,CAACC,OAAT,CAAiB,SAAAC,KAAK,CAAI,CACxB;AACAL,UAAU,CAACK,KAAD,CAAV,CACA,MAAKC,uBAAL,CAA6BL,EAA7B,EACD,CAJD,EAKD,CAtBH,OAwBEM,aAxBF,CAwBkB,SAAAP,UAAU,CAAI,IACpBC,CAAAA,EADoB,CACb,MAAKC,KADQ,CACpBD,EADoB,CAE5B,GAAME,CAAAA,QAAQ,CAAGX,CAAC,YAAKS,EAAL,kBAAlB,CAEAE,QAAQ,CAACK,QAAT,CAAkB,SAAAH,KAAK,CAAI,CACzB;AAEAL,UAAU,CAACK,KAAD,CAAV,CACD,CAJD,EAKD,CAjCH,OAmCEI,QAnCF,CAmCa,UAAM,iBACS,MAAKP,KADd,CACPD,EADO,aACPA,EADO,CACHS,OADG,aACHA,OADG,CAEf,GAAMP,CAAAA,QAAQ,CAAGX,CAAC,YAAKS,EAAL,kBAAlB,CAEAE,QAAQ,CAACQ,MAAT,CAAgB,SAAAN,KAAK,CAAI,CACvB;AACA,GAAMO,CAAAA,KAAK,CAAGP,KAAK,CAACQ,MAAN,CAAaC,cAA3B,CACA,GAAMC,CAAAA,GAAG,CAAGV,KAAK,CAACQ,MAAN,CAAaG,YAAzB,CACA,GAAMC,CAAAA,aAAa,CAAGrB,iBAAiB,CAACK,EAAD,CAAKS,OAAL,CAAvC,CAEA,GAAMQ,CAAAA,IAAI,CAAG,CACXC,IAAI,CAAExB,iBAAiB,CAACM,EAAD,CAAKW,KAAL,CAAYG,GAAZ,CADZ,CAEXK,GAAG,CAAEH,aAAa,CAACG,GAFR,CAGXC,GAAG,CAAEJ,aAAa,CAACI,GAHR,CAAb,CAMA,MAAKC,QAAL,CAAc,CACZC,aAAa,CAAE,CACbJ,IAAI,CAAExB,iBAAiB,CAACM,EAAD,CAAKW,KAAL,CAAYG,GAAZ,CADV,CAEbK,GAAG,CAAEH,aAAa,CAACG,GAFN,CAGbC,GAAG,CAAEJ,aAAa,CAACI,GAHN,CADH,CAAd,EAQA,MAAKG,qBAAL,CAA2B3B,MAA3B,CAAmCqB,IAAnC,EACD,CArBD,EAsBD,CA7DH,OAoEEO,iBApEF,CAoEsB,UAAM,CACxB,MAAO,OAAKvB,KAAL,CAAWwB,QAAX,CAAoB7B,MAAM,CAAC8B,OAAP,CAAe,GAAf,CAAoB,EAApB,CAApB,CAAP,CACD,CAtEH,OAwEEC,iBAxEF,CAwEsB,SAAAC,SAAS,CAAI,CAC/B,MAAKL,qBAAL,CAA2B3B,MAA3B,CAAmCgC,SAAnC,EACD,CA1EH,OA4EEC,mBA5EF,CA4EwB,UAAM,CAC1B,MAAO,OAAKC,eAAL,CAAqBlC,MAArB,CAAP,CACD,CA9EH,OAgFEmC,gBAhFF,CAgFqB,UAAM,CACvB,MAAO,OAAK9B,KAAL,CAAWqB,aAAlB,CACD,CAlFH,sGAC6B,gCAANU,IAAM,+CAANA,IAAM,0BACzB,wEAAwBC,KAAxB,CAA8B,IAA9B,CAAoCD,IAApC,EAEA,KAAKE,kBAAL,CAAwB,KAAKC,KAAL,CAAWP,SAAnC,EAHyB,gBAKY,KAAKO,KALjB,CAKjB7B,aALiB,aAKjBA,aALiB,CAKFR,SALE,aAKFA,SALE,CAOzB,KAAKU,QAAL,GACA,KAAKV,SAAL,CAAeA,SAAf,EACA,KAAKQ,aAAL,CAAmBA,aAAnB,EACD,CAXH,uCAoFW,IACCN,CAAAA,EADD,CACQ,KAAKmC,KADb,CACCnC,EADD,CAEP,MAAO,qBAAC,YAAD,EAAc,EAAE,CAAEA,EAAlB,CAAsB,QAAQ,KAA9B,EAAP,CACD,CAED;AAzFF,2BAAmCR,QAAnC,EAAaK,a,CA0FJuC,Y,CAAe,CACpBR,SAAS,CAAE,EADS,C,CAKxB/B,aAAa,CAACwC,SAAd,CAA0B,CACxBC,aAAa,CAAEhD,SAAS,CAACiD,MADD,CAExBjC,aAAa,CAAEhB,SAAS,CAACkD,IAFD,CAGxB1C,SAAS,CAAER,SAAS,CAACkD,IAHG,CAA1B,CAMA,cAAe3C,CAAAA,aAAf","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport $ from \"jquery\";\n\nimport Emulator from \"../Emulator/index\";\nimport EmulatorView from \"../Emulator/EmulatorView\";\n\nimport { getSelectionRange, getStartSelection } from \"../Emulator/controler\";\n\nconst MARK_1 = \"mark-1\";\n\nexport class FieldsMapping extends Emulator {\n  componentDidMount(...args) {\n    super.componentDidMount.apply(this, args);\n\n    this.markAllCheckString(this.props.highlight);\n\n    const { onDoubleClick, onMouseUp } = this.props;\n\n    this.onSelect();\n    this.onMouseUp(onMouseUp);\n    this.onDoubleClick(onDoubleClick);\n  }\n\n  onMouseUp = callbackFn => {\n    const { id } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.mouseup(event => {\n      // console.log(`| ========== ${event.type} ========== | `);\n      callbackFn(event);\n      this.clearAllMarkChackString(id);\n    });\n  };\n\n  onDoubleClick = callbackFn => {\n    const { id } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.dblclick(event => {\n      // console.log(`| ========== ${event.type} ========== |`);\n\n      callbackFn(event);\n    });\n  };\n\n  onSelect = () => {\n    const { id, colSize } = this.state;\n    const elScreen = $(`.${id}.as400-screen`);\n\n    elScreen.select(event => {\n      // console.log(`| ========== ${event.type} ========== |`);\n      const start = event.target.selectionStart;\n      const end = event.target.selectionEnd;\n      const startPosition = getStartSelection(id, colSize);\n\n      const data = {\n        text: getSelectionRange(id, start, end),\n        row: startPosition.row,\n        col: startPosition.col\n      };\n\n      this.setState({\n        lastSelection: {\n          text: getSelectionRange(id, start, end),\n          row: startPosition.row,\n          col: startPosition.col\n        }\n      });\n\n      this.markStringChackString(MARK_1, data);\n    });\n  };\n\n  /**\n   * ==================\n   *  provide function\n   * ==================\n   */\n  getFieldHighlight = () => {\n    return this.state.markList[MARK_1.replace(\"-\", \"\")];\n  };\n\n  setFieldHighlight = highlight => {\n    this.markStringChackString(MARK_1, highlight);\n  };\n\n  clearFieldHighlight = () => {\n    return this.clearMarkString(MARK_1);\n  };\n\n  getLastSelection = () => {\n    return this.state.lastSelection;\n  };\n\n  render() {\n    const { id } = this.props;\n    return <EmulatorView id={id} readOnly />;\n  }\n\n  // Set default props\n  static defaultProps = {\n    highlight: {}\n  };\n}\n\nFieldsMapping.propTypes = {\n  highlightList: PropTypes.object,\n  onDoubleClick: PropTypes.func,\n  onMouseUp: PropTypes.func\n};\n\nexport default FieldsMapping;\n"]},"metadata":{},"sourceType":"module"}